<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Paciente | Dashboard</title>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:"Segoe UI",sans-serif;
}

:root{
  --verde:#1e8f5a;
  --verde-soft:#e9f8f0;
  --borde:#cceedd;
  --bg:#f4fbf7;
}

body{
  min-height:100vh;
  display:flex;
  background:var(--bg);
}

/* SIDEBAR */
.sidebar{
  width:260px;
  background:#fff;
  border-right:1px solid var(--borde);
  padding:2rem 1.5rem;
}

.logo{
  display:block;
  margin:0 auto 2rem;
  max-width:90px;
}

.sidebar a{
  display:block;
  padding:0.9rem 1rem;
  border-radius:12px;
  color:var(--verde);
  text-decoration:none;
  font-weight:600;
  margin-bottom:0.6rem;
}

.sidebar a.active,
.sidebar a:hover{
  background:var(--verde-soft);
}

/* CONTENT */
.content{
  flex:1;
  padding:3rem;
}

h1{
  font-weight:300;
  letter-spacing:3px;
  text-transform:uppercase;
  color:var(--verde);
  margin-bottom:2rem;
}

/* CARDS */
.cards{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:2rem;
}

.card{
  background:#fff;
  border-radius:20px;
  padding:2rem;
  box-shadow:0 15px 35px rgba(0,0,0,0.08);
  text-align:center;
}

.card h2{
  font-size:2.5rem;
  color:var(--verde);
}

.card p{
  margin-top:0.6rem;
  letter-spacing:1px;
  text-transform:uppercase;
  font-size:0.75rem;
}

/* INFO */
.info{
  margin-top:3rem;
  background:#fff;
  border-radius:20px;
  padding:2rem;
  box-shadow:0 15px 35px rgba(0,0,0,0.08);
}
@keyframes fadeUp {
  from {
    opacity: 0;
    transform: translateY(15px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.content > * {
  animation: fadeUp 0.6s ease both;
}

.cards .card {
  animation-delay: 0.1s;
}

.info {
  animation-delay: 0.25s;
}

</style>
</head>

<body>

<div class="sidebar">
  <img src="logomed.png" class="logo">

  <a href="/paciente.html" class="nav-link active">Inicio</a>
  <a href="/perfil.html" class="nav-link">Mi perfil</a>
  <a href="/mis-recetas.html" class="nav-link">Mis recetas</a>
  <a href="/historial.html" class="nav-link">Historial</a>
  <a href="/logout" class="nav-link logout">Cerrar sesión</a>
</div>


<div class="content">
<h1 id="bienvenida">Bienvenido</h1>


  <div class="cards">
    <div class="card">
      <h2 id="total">0</h2>
      <p>Recetas totales</p>
    </div>

    <div class="card">
      <h2 id="pendientes">0</h2>
      <p>Pendientes</p>
    </div>

    <div class="card">
      <h2 id="entregadas">0</h2>
      <p>Entregadas</p>
    </div>
  </div>

  <div class="info">
    <h3>Última receta</h3>
    <p id="ultima">—</p>
  </div>
</div>
<script>
fetch('/paciente/info')
  .then(res => res.json())
  .then(data => {
    document.getElementById('bienvenida').textContent =
      `Bienvenido ${data.nombre}`;
  });
</script>


<script>
fetch('/paciente/dashboard')
  .then(res => res.json())
  .then(data => {
    document.getElementById('total').textContent = data.total || 0;
    document.getElementById('pendientes').textContent = data.pendientes || 0;
    document.getElementById('entregadas').textContent = data.entregadas || 0;

    document.getElementById('ultima').textContent =
      data.ultima
      ? new Date(data.ultima).toLocaleString()
      : 'Sin recetas aún';
  });
</script>

</body>
</html>
